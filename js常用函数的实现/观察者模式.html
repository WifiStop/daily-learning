<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>观察者模式</title>
  <script>
    class Subject{
      name='';
      observers = [];
      state = ''
      constructor(name){
        this.name = name;
      }
      attach(observer){
        this.observers.push(observer)
      }
      setState(newState){
        this.state = newState;
        this.observers.forEach(o=>{o.update(newState)})
      }

    }
    class Observer{
      constructor(name){
        this.name = name;
      }
      update(newState){
        console.log(`${this.name}say:${newState}`)
      }
    }
    let sub = new Subject('灯');
    let mm = new Observer('小明');
    let jj = new Observer('小王');
    sub.attach(mm);
    sub.attach(jj)
    sub.setState('灯亮了来电了')
  </script>
</head>
<body>
  
</body>
</html>